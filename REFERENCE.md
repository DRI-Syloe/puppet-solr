# Reference
<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Classes

* [`solr`](#solr): Installs solr using the embedded version of jetty.

## Defined types

* [`solr::core`](#solrcore): Sets up a core based on the example core installed by default.
* [`solr::shared_lib`](#solrshared_lib): Downloads and installs a file into solr's lib directory.

## Classes

### solr

Configures solr and starts the service.

If using Centos, the firewall rules need to be configured as shown:

   ```
    add IP Tables
    /sbin/iptables -I INPUT 1 -p tcp --dport 8983 -j ACCEPT
    /sbin/service iptables save
    service iptables restart
   ```

**COPYRIGHT**

GPL-3.0+

#### Examples

##### 

```puppet

include solr
```

#### Parameters

The following parameters are available in the `solr` class.

##### `version`

Data type: `String`

The version to install.

Default value: '6.2.0'

##### `url`

Data type: `String`

The url of the source repository for apache solr.

Default value: 'http://archive.apache.org/dist/lucene/solr/'

##### `timeout`

Data type: `String`

The timeout used for downloading the solr package.

Default value: '120'

##### `manage_user`

Data type: `Boolean`

Whether to manage the solr user or not

Default value: `true`

##### `solr_user`

Data type: `String`

Run Solr as this user ID.
Note, creates this user.

Default value: 'solr'

##### `solr_host`

Data type: `String`

Listen to connections from this network host
Use 0.0.0.0 as solr_host to accept all connections.

Default value: '127.0.0.1'

##### `solr_port`

Data type: `String`

The network port used by Jetty

Default value: '8983'

##### `solr_heap`

Data type: `String`

The heap size used by jetty.

Default value: '512m'

##### `solr_downloads`

Data type: `String`

Contains the solr tarballs and extracted dirs.

Default value: '/opt/solr_downloads'

##### `install_dir`

Data type: `String`

The install directory (`-i`) parameter passed to the solr installer.

Default value: '/opt'

##### `install_dir_mg`

Data type: `Boolean`

Sets if this module should manage the install directory.
True if this module should manage and false otherwise.

Default value: `false`

##### `solr_home`

Data type: `String`

The home directory for solr.

Default value: '/opt/solr/server/solr'

##### `var_dir`

Data type: `String`

The var directory for solr.

Default value: '/var/solr'

##### `solr_logs`

Data type: `String`

The directory for the solr logs.

Default value: '/var/log/solr'

##### `java_home`

Data type: `String`

The directory that contains the jvm.
Default: (os specific)
  * Debian/Ubuntu: '/usr/lib/jvm/java-8-openjdk-amd64/jre'
  * CentOS/RHEL: '/usr/lib/jvm/jre-1.8.0'

Default value: $solr::params::java_home

##### `solr_environment`

Data type: `Array`

Bash style environment variables passed at the end of the solr
server environment.

Default value: []

##### `cores`

Data type: `Hash`

An array of hashes that define a core which will be created with the
create_resources function.
See type solr::core for details.

Default value: {}

##### `required_packages`

Data type: `Array[String]`

Specified in params and is platform dependent.

Default value: $solr::params::required_packages

##### `zk_hosts`

Data type: `Array`

For configuring ZooKeeper ensemble.

Default value: []

##### `log4j_maxfilesize`

Data type: `String`

Maximum allowed log file size (in bytes) before rolling over.
Suffixes "KB", "MB" and "GB" are allowed.

Default value: '4MB'

##### `log4j_maxbackupindex`

Data type: `String`

Maximum number of log backup files to keep.

Default value: '9'

##### `log4j_rootlogger_loglevel`

Data type: `Variant[
    Enum['ALL', 'DEBUG', 'ERROR', 'FATAL', 'INFO', 'OFF', 'TRACE',
      'TRACE_INT', 'WARN'],
    String]`

The loglevel to set for log4j.

Default value: 'INFO'

##### `schema_name`

Data type: `Optional[String]`

The Solr cores' schema name. This should be set to `schema.xml` if using
the classic schema.xml method. If using a managed schema, set this to
Solr's "managedSchemaResourceName" setting, typically 'manage-schema'.
Refer to Solr's documentation for `core.properties` for details.
Default: varies by version:
  Solr >= 5.6.0 will use 'manage-schema'
  Solr < 5.6.0 will default to 'schema.xml'

Default value: `undef`

## Defined types

### solr::core

Sets up a core based on the example core installed by default.

#### Parameters

The following parameters are available in the `solr::core` defined type.

##### `core_name`

Data type: `String`

The name of the core (must be unique).

Default value: $title

##### `replace`

Data type: `Boolean`

Whether or not files should be updated if they are different from the source
specified.

Default value: `true`

##### `currency_src_file`

Data type: `String`

The currency file for the core.  It can either be a local file
(managed outside of this module) or a remote file served through a puppet
file server (puppet:///).

Default value: "${::solr::basic_dir}/currency.xml"

##### `other_files`

Data type: `Array`

An array of hashes to create file resources.

Default value: []

##### `protwords_src_file`

Data type: `String`

The schema file for the core.  It can either be a local file
(managed outside of this module) or a remote file served through a puppet
file server (puppet:///).

Default value: "${::solr::basic_dir}/protwords.txt"

##### `schema_src_file`

Data type: `String`

The schema file for the core.  It can either be a local file
(managed outside of this module) or a remote file served through a puppet
file server (puppet:///).

Default value: "${::solr::basic_dir}/${solr::schema_filename}"

##### `solrconfig_src_file`

Data type: `String`

The schema file for the core.  It can either be a local file
(managed outside of this module) or a remote file served through a puppet
file server (puppet:///).

Default value: "${::solr::basic_dir}/solrconfig.xml"

##### `stopwords_src_file`

Data type: `String`

The schema file for the core.  It can either be a local file
(managed outside of this module) or a remote file served through a puppet
file server (puppet:///).

Default value: "${::solr::basic_dir}/stopwords.txt"

##### `synonyms_src_file`

Data type: `String`

The schema file for the core.  It can either be a local file
(managed outside of this module) or a remote file served through a puppet
file server (puppet:///).

Default value: "${::solr::basic_dir}/synonyms.txt"

##### `elevate_src_file`

Data type: `String`



Default value: "${::solr::basic_dir}/elevate.xml"

### solr::shared_lib

Downloads and installs a file into solr's lib directory.

#### Parameters

The following parameters are available in the `solr::shared_lib` defined type.

##### `url`

Data type: `String`

A file to download and install to the solr's lib directory.

##### `filename`

Data type: `Optional[String]`

If the name of the file is to be different than the filename from the
the url, the name of the file can be set.

Default value: `undef`

##### `path`

Data type: `String`

The path to copy the file.
If setting a custom path, this module does not handle
maintaining the path, this is up to the calling module.

Default value: $solr::solr_lib_dir

##### `web_user`

Data type: `Optional[String]`

The user name of the url to download.

Default value: `undef`

##### `web_password`

Data type: `Optional[String]`

The user's password to download the file.

Default value: `undef`

